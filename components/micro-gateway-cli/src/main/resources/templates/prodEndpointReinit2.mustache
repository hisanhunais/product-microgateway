consulKeyConfigValue = apiId + "_prod_etcdKey";
consulKey = gateway:retrieveConfig(consulKeyConfigValue, "");
if(consulKey != "" && gateway:consulConnectionEstablished){
hasUrlChanged = <boolean>gateway:consulurlChanged[consulKey];
    match hasUrlChanged{
    boolean matchUrlChanged => reinitRequired = matchUrlChanged;
    error err => log:printError("Error in checking for Re-initialization", err = err);
    }
    if(reinitRequired){
    newConfig = {url:<string>gateway:consulUrls[consulKey]};
        destination_attribute = <string>gateway:consulUrls[consulKey];
            try{
            {{qualifiedServiceName}}_prod.init(newConfig);
            gateway:consulurlChanged[consulKey] = false;
            }catch(error err){
            reinitFailed = true;
            gateway:consulurlChanged[consulKey] = true;

            http:Response res = new;
            res.statusCode = 500;
            json payload = {
            "fault": {
            "code": "101505",
            "message": "Runtime Error",
            "description": "URL defined at consul for key " + config:getAsString(consulKeyConfigValue) + " is invalid"
            }
            };
            runtime:getInvocationContext().attributes["error_code"] = "101505";
            res.setPayload(payload);
            clientResponse = res;
            log:printError("URL defined at consul for key " + config:getAsString(consulKeyConfigValue) + " is invalid");
            }
            }
            }

            if(!reinitFailed){
            clientResponse = {{qualifiedServiceName}}_prod->forward(urlPostfix, req);
            runtime:getInvocationContext().attributes["destination"] = destination_attribute;
            }